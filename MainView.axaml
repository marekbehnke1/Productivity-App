<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
		xmlns:Controls="clr-namespace:LearnAvalonia.Components"
		xmlns:Converters="using:LearnAvalonia.Converters"
		xmlns:Models="clr-namespace:LearnAvalonia.Models"
		mc:Ignorable="d" d:DesignWidth="450" d:DesignHeight="800"
		Width="450"
		Height="800"
        x:Class="LearnAvalonia.MainView"
		x:Name="MainAppWindow"
		Classes="MainAppWindow"
		xmlns:vm="clr-namespace:LearnAvalonia.ViewModels"
		x:DataType="vm:MainViewModel"
        Title="LearnAvalonia"
		Background="{DynamicResource ResourceKey=PrimaryBackGround}"
		TransparencyLevelHint="AcrylicBlur"
		ExtendClientAreaToDecorationsHint="True"
		SystemDecorations="Full"
		CanResize="False"
		>
	
	<Window.Resources>
		
		<Animation Duration="00:25:00" 
				   FillMode="Forward"
				   x:Key="TimerAnimationForward"
				   x:SetterTargetType="ProgressBar">
			<KeyFrame Cue="0%">
				<Setter Property="Value" Value="0"/>
				<Setter Property="Foreground" Value="Aqua"/>

			</KeyFrame>
			<KeyFrame Cue="100%">
				<Setter Property="Value" Value="100"/>
				<Setter Property="Foreground" Value="{DynamicResource TimerGradient}"/>

			</KeyFrame>
		</Animation>
		<Animation Duration="00:05:00" 
				   FillMode="Forward"
				   PlaybackDirection="Normal"
				   x:Key="TimerAnimationReverse"
				   x:SetterTargetType="ProgressBar">
			<KeyFrame Cue="0%">
				<Setter Property="Value" Value="100"/>
				<Setter Property="Foreground" Value="{DynamicResource TimerGradientReverse}"/>
			</KeyFrame>
			<KeyFrame Cue="100%">
				<Setter Property="Value" Value="0"/>
				<Setter Property="Foreground" Value="Aqua"/>
			</KeyFrame>
		</Animation>

		<Animation 
			Duration="0:0:0.2" 
			x:Key="WindowCollapse"
			x:SetterTargetType="Window">
			<KeyFrame Cue="0%">
				<Setter Property="Height" Value="800"/>
			</KeyFrame>
			<KeyFrame Cue="100%">
				<Setter Property="Height" Value="80"/>
			</KeyFrame>
		</Animation>
		
		<Animation 
			Duration="0:0:0.2" 
			x:Key="WindowExpand"
			x:SetterTargetType="Window">
			<KeyFrame Cue="0%">
				<Setter Property="Height" Value="80"/>
			</KeyFrame>
			<KeyFrame Cue="100%">
				<Setter Property="Height" Value="800"/>
			</KeyFrame>
		</Animation>
		
		<Converters:DropDownArrowConverter x:Key="DropDownArrowConverter"/>
		
	</Window.Resources>

	<Design.DataContext>
		<vm:MainViewModel/>
	</Design.DataContext>
	
	
	<Panel>
	<ExperimentalAcrylicBorder IsHitTestVisible="True">
		<ExperimentalAcrylicBorder.Material>
			<ExperimentalAcrylicMaterial
				BackgroundSource="Digger"
				TintColor="#000000"
				TintOpacity="0.6"
				MaterialOpacity="0.0" />
		</ExperimentalAcrylicBorder.Material>
	</ExperimentalAcrylicBorder>

		<Border BorderThickness="2" BorderBrush="#2c2c2c">
			
		<Grid Name="MainGrid" RowDefinitions="auto, * , auto">
			<!--Top Bar-->
			<Grid Name="TopBar" Grid.Row="0" ColumnDefinitions="50, *" Margin="5" Height="25">
				<StackPanel Grid.Column="0" VerticalAlignment="Top" Orientation="Horizontal">
					<!--Collapse Button-->
					<Button Classes="CollapseButton" Click="CollapseApp" HorizontalAlignment="Left" VerticalAlignment="Top" Padding="0">
						<Image Width="20" Source="{Binding !IsCollapsed, ElementName=MainAppWindow ,Converter={StaticResource DropDownArrowConverter}}"></Image>
					</Button>
	
				</StackPanel>
			</Grid>
			
				<!--Main Panel-->
			<Grid
				x:Name="MainPanel"
				Classes="MainPanel"
				Grid.Row="1"
				ColumnDefinitions="*, auto"
				MaxHeight="700"
				ClipToBounds="True"
				>

				<!--Main Notes Area-->
				<ScrollViewer x:Name="NotesScroller">

					<StackPanel
						x:Name="NotesPanel"
						Grid.Column="0"
						Spacing="10"
						ClipToBounds="True"
						Margin="0"
						>
						<!--
						<Controls:ListItem
							Title="Test"
							TaskPriority="High"
							Description="{Binding Test}"/>
						<Controls:ListItem
							Title="test title"
							TaskPriority="Low"/>
						<Controls:ListItem
							Title="another test"
							TaskPriority="Medium"/>
						-->
						
						<!--The area where our collection items will be displayed-->
						<ItemsControl ItemsSource="{Binding Tasks}">
							<ItemsControl.ItemsPanel>
								<!--Specifies a container for the items-->
								<ItemsPanelTemplate>
									<StackPanel ClipToBounds="True" Spacing="10"/>
								</ItemsPanelTemplate>
							</ItemsControl.ItemsPanel>
							
							<!--Describes the data and UI layouts-->
							<ItemsControl.ItemTemplate>
								<!--This is the data layout-->
								<DataTemplate DataType="{x:Type Models:TaskItem}">
									<!--This specifies a control to use for the ui layout-->
									<Controls:ListItem
										Title="{Binding Title}"
										Description="{Binding Description}"
										DueDate="{Binding DueDate}"
										TaskPriority="{Binding TaskPriority}"
										IsCollapsed="{Binding IsCollapsed}"/>
								</DataTemplate>
							</ItemsControl.ItemTemplate>
							
						</ItemsControl>
						
						
					</StackPanel>

				</ScrollViewer>

				<!--Right Side Bar-->
				<StackPanel Grid.Column="1" MaxWidth="30" Orientation="Vertical">
					<Button Classes="CreateNote" Click="CreateNote" Padding="5">
						<Image Height="20" Width="20" Source="{SvgImage /Assets/Images/write.svg}"/>
					</Button>
					<Button Classes="SettingsButton" Click="" Padding="5">
						<Image Height="20" Width="20" Source="{SvgImage /Assets/Images/settings.svg}"/>
					</Button>

				</StackPanel>

			</Grid>
			
			<!--Bottom Bar-->
			<Grid 
				Name="BottomBar" 
				Grid.Row="2" 
				Margin="0 0 0 5">
				<ProgressBar Height="30" x:Name="TimerBar"/>
				<Grid ColumnDefinitions="100, * , 100">
					<Button Click="Timer_Start" 
							x:Name="TimerButton" 
							Grid.Column="0" 
							HorizontalAlignment="Center" 
							VerticalAlignment="Center">
						Start
					</Button>
					
					<!--Timer countdown text-->
					<TextBlock 
						x:Name="TimerText" 
						Grid.Column="2" 
						HorizontalAlignment="Center" 
						VerticalAlignment="Center"/>
				</Grid>
			</Grid>
		</Grid>
		</Border>
	
	</Panel>

</Window>
